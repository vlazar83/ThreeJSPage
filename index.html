<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
  </head>
  <body>
    <div id="app"></div>
    <canvas id="viewport"></canvas>
    <div id="div1" class="page-wrapper">
      <h3>Three.js: Change camera position on page scroll</h3>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris quis
        vulputate neque. Proin ullamcorper nisi libero. Praesent ac tincidunt
        est. Pellentesque convallis tincidunt felis, non dignissim sapien
        dignissim nec. Donec luctus ligula ligula, ut consectetur massa
        vulputate ac. Donec mattis feugiat iaculis. Fusce id leo at lectus
        ornare tempor. Suspendisse potenti. Praesent purus nisi, accumsan eu
        facilisis et, convallis et tellus. Quisque vestibulum lectus lectus, a
        aliquet ligula malesuada vel. Nullam vestibulum ut sapien consectetur
        luctus. Aenean augue lacus, sodales sit amet tincidunt vitae, facilisis
        in mi. Nulla facilisi.
      </p>
    </div>
    <script src="./main.js"></script>
    <script src="./node_modules/three/build/three.js"></script>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
    <script>
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        100,
        window.innerWidth / window.innerHeight,
        1,
        1000
      );

      //Load background texture
      const loaderTexture = new THREE.TextureLoader();
      loaderTexture.load("./model/background.jpeg", function (texture) {
        scene.background = texture;
      });

      var loader = new THREE.GLTFLoader();

      const renderer = new THREE.WebGLRenderer();
      renderer.setClearColor(0xffffff, 0);
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.shadowMap.enabled = false;
      document.body.appendChild(renderer.domElement);

      const geometry = new THREE.BoxGeometry();
      const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
      const cube = new THREE.Mesh(geometry, material);
      var model = null;
      //scene.add(cube);

      loader.load(
        "./model/scene.gltf",
        function (gltf) {
          model = gltf.scene.children[0];
          model.receiveShadow = false; //default
          scene.add(model);
          console.log("thiss", model);
        },
        undefined,
        function (error) {
          console.error(error);
        }
      );

      camera.position.set(0, 10, 20);

      const light = new THREE.HemisphereLight(0xffffbb, 0x080820, 1);
      light.position.set(100, 10, 0);
      light.castShadow = false; // default false
      scene.add(light);
      scene.background = new THREE.Color(0xffffff);

      scene.traverse(function (child) {
        if (child.material) {
          child.material.needsUpdate = true;
        }
      });

      const animate = function () {
        requestAnimationFrame(animate);

        model.rotation.x += 0.01;
        model.rotation.y += 0.01;
        model.rotation.z += 0.01;

        renderer.render(scene, camera);
      };

      function updateCamera(ev) {
        let div1 = document.getElementById("div1");
        camera.position.x = 20 - window.scrollY / 100.0;
        camera.position.z = 20 - window.scrollY / 100.0;
      }

      window.addEventListener("scroll", updateCamera);

      animate();
    </script>
    <div id="div2" class="page-wrapper">
      <h3>Three.js: Change camera position on page scroll</h3>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris quis
        vulputate neque. Proin ullamcorper nisi libero. Praesent ac tincidunt
        est. Pellentesque convallis tincidunt felis, non dignissim sapien
        dignissim nec. Donec luctus ligula ligula, ut consectetur massa
        vulputate ac. Donec mattis feugiat iaculis. Fusce id leo at lectus
        ornare tempor. Suspendisse potenti. Praesent purus nisi, accumsan eu
        facilisis et, convallis et tellus. Quisque vestibulum lectus lectus, a
        aliquet ligula malesuada vel. Nullam vestibulum ut sapien consectetur
        luctus. Aenean augue lacus, sodales sit amet tincidunt vitae, facilisis
        in mi. Nulla facilisi.
      </p>
    </div>
  </body>
</html>
